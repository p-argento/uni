
# Logical Design

A table is a set of lines (or records).
It has a name and a set of column names (or fields or attributes).
A type is also defined for each attributes.
There can be constraints. Like a salary must be positive.

The key constraint, where every line of an attribute must be unique. There could many key constraint.
A foreign key constraint is also called an inclusion constraint (or subset constraint). It means that every value that appears in the column must appear in the column connected. It is a relation of subset $A\subseteq B$.
The foreign key looks like an association in concept design. But here I use a value to represent the association.

Every relation has
- extensional aspect, the content of the table, the rows
- schema, descriptional aspects
I always build a database in the sequence
1. build the schema
2. fill with content

The content of a table is a set of lines.
The order is irrelevant.
Usually a define at least one key constraint, to avoid repetition of rows.
The extension of a table is a set, not a multiset.
The notation is very similar to conceptual schema.
Now the arrow is just one. An arrow does not denote an association, but a foreign key, that is just an attribute.
The primary key is underlined. And I put a star next to the primary key.

I can have a ciclic association. It will just be a foreign key that relates to its own table. Every field in the table may contain the special type null. 
> what is the meaning of null?

## From conceptual schema to relational
1. Add an artificial primary key to any collection which needs one.
	1. People use unique identifiers, but i suggest you to add your own.
2. translate associations and inclusions into foreign keys
3. translate multivalued attrivutes into tables
4. flatten complex attributes

How it works?
*One-to-many*
If the association is one in at least one direction (1-N), then choose the unary direction and represent that as a primary key.
I take the unary arrow doesn't change, the other one disappears.

![[Pasted image 20240301215441 1.png]]

*Many to many.*
Understand that every instance is just a pair.
Every many to many produces a new table.
It can be very long, but just two columns with the two foreign keys.
It is symmetrical.

![[Pasted image 20240301215719 1.png]]

If you had an association with attributes.


How do I group all employees of the same group? Scan, because tables are not sorted.

*Subclasses*
The arrow becomes a foreign key. 

![[Pasted image 20240301220242 1.png]]

How do we represent this with a relational schema?
A foreign key into persons.
Each family lives in exactly one flat.
The relationship between land owners (tax-payer) and flats is many to many hence it generates a new table.

> exercise. try both conceptual and logical schema.

### Exercise Medical Center
[[medical center exercises]]
![[medical_center_handwritten.pdf]]
It is a subclass if you have at least two extra attribute. 
If there is only one attribute, then the association is sufficient.
If there are two different associations between two classes, you must give a name to at least one of them.


